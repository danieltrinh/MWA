<html>
    <head>
        <title>Lab 1 - Excercise 1 </title>
        <link rel="shortcut icon" href="#">
    </head>
    <body>
        <div id="source_string">This house is nice!</div>
        <script>
            let s = document.getElementById("source_string").textContent;
            let ss = new String(s);
            
            function replaceWords(string, banned_arr)
            {
                for (const ban of banned_arr)
                    if(string.includes(ban))
                        string = string.replace(ban, "***");
                return string;
            }
            
            String.prototype.filterWords = function(banned_arr){
//                let str_arr = this.split(" ");                
//                for (const ban of banned_arr)
//                    {
//                        console.log(ban);
//                        let index = str_arr.findIndex(x => x == ban)
//                        if(index)
//                            {
//                                str_arr[index] = "***";
//                                
//                            }
//                    }
//                let result = str_arr.join(" ")
                console.log('Using ES6');
                let res = this;
                return replaceWords(res,banned_arr);
            }
            
            String.prototype.filterWords2 = function(banned_arr){
                let res = this;
                return new Promise(
                    (resolve, reject) => {
                        console.log('Using Promises');
                        let flag = false;
                        for (const ban of banned_arr)
                            if(res.includes(ban))
                            {
                                flag = true;
                                res = res.replace(ban, "***");
                            }
                        if(flag)
                            resolve(res);
                        else
                            reject("No match")
                    }
                )
            }
            
            String.prototype.filterWords3 = async function(banned_arr){
                try{
                    console.log("Using await");
                    let re = await this.filterWords2(banned_arr);
                    console.log("   " + re);
                } catch (error) {
                    console.log(error);
                }
            }
                        
            
            let result1 = s.filterWords(["house", "nice"]);
            console.log("   " + result1);
            
            let result2 = s.filterWords2(["house", "nice"])
                            .then(data => console.log("   " + data))
                            .catch(err => console.log(err));
            
            s.filterWords3(["house", "nice"]);
            
        </script>
    </body>
</html>